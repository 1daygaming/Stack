const a0_0x184c74=a0_0x4e1e;function a0_0x4e1e(_0x59b6cf,_0x28b85b){const _0x1c44ee=a0_0x1c44();return a0_0x4e1e=function(_0x4e1ebf,_0x3cf352){_0x4e1ebf=_0x4e1ebf-0x106;let _0x5291eb=_0x1c44ee[_0x4e1ebf];return _0x5291eb;},a0_0x4e1e(_0x59b6cf,_0x28b85b);}(function(_0x471ce8,_0x4c139a){const _0x4f6b1c=a0_0x4e1e,_0x422ad6=_0x471ce8();while(!![]){try{const _0x269479=-parseInt(_0x4f6b1c(0x159))/0x1+parseInt(_0x4f6b1c(0x13f))/0x2*(parseInt(_0x4f6b1c(0x106))/0x3)+-parseInt(_0x4f6b1c(0x15d))/0x4*(parseInt(_0x4f6b1c(0x180))/0x5)+parseInt(_0x4f6b1c(0x109))/0x6*(-parseInt(_0x4f6b1c(0x156))/0x7)+parseInt(_0x4f6b1c(0x160))/0x8*(parseInt(_0x4f6b1c(0x170))/0x9)+parseInt(_0x4f6b1c(0x115))/0xa*(parseInt(_0x4f6b1c(0x15c))/0xb)+-parseInt(_0x4f6b1c(0x16c))/0xc;if(_0x269479===_0x4c139a)break;else _0x422ad6['push'](_0x422ad6['shift']());}catch(_0x1d4bd6){_0x422ad6['push'](_0x422ad6['shift']());}}}(a0_0x1c44,0x7e05f));import*as a0_0x590a82 from'https://cdnjs.cloudflare.com/ajax/libs/three.js/0.170.0/three.module.min.js';import{gsap}from'https://cdn.skypack.dev/gsap';const BASE_BLOCK_SIZE={'width':0xa,'height':0x3,'depth':0xa},COLOR={'background':a0_0x184c74(0x12d),'baseBlock':a0_0x184c74(0x173),'movingBlock':a0_0x184c74(0x176),'placedBlock':'#71ec38','fallingBlock':a0_0x184c74(0x136)},SPEED_FACTOR=0xa,MOVING_RANGE=0xf;function a0_0x1c44(){const _0x33ba5a=['syncPosition','style','Mesh','board','score','devicePixelRatio','tick','#score','_prevTimer','sizes','OrthographicCamera','renderer','130214ipxICX','white','destroy','693706unHOsL','none','_scene','600248KAPYOi','8ymSnYU','restart','canvas','45016SaHgwL','push','clock','depth','activeLayerIndex','Color','setSize','#start-button','lastPlacedBlock','renderFrame','remove','_createPlacedBlock','4374444hIehGV','camera','mesh','_stage','486FdDnjU','Clock','forEach','#444','height','place','#f753e6','isAxisZ','DirectionalLightHelper','clear','setPixelRatio','Scene','geometry','_onResize','_addFirstLayer','новый\x20уровень!','1256885LWSdRD','abs','prevLayer','placedBlock','activeLayer','tower','_direction','_initialPosition','aspectRatio','ambientLight','_updateRenderer','Tower\x20Created','display','isCuttingBehind','reset','426210kBHDGU','AmbientLight','axis','48zoeyhx','material','baseBlock','width','DirectionalLight','_removeMovingBlock','_finish','overlap','scene','bind','min','movingBlock','170mDGTGS','set','color','click','_addLayer','getElapsedTime','_initMovingBlockPosition','addEventListener','resetPosition','values','innerHeight','updateScore','_isGameActive','layers','left','right','cut','fallingBlock','_onResizeBound','parentElement','end','textContent','scoreElement','_near','#eee','body','stage','instance','restartButton','_far','background','add','_isGameOver','#f8f659','lookAt','_reverseDirection','_scoreUpdate','BoxGeometry','resize','_createFallingBlock','_init','position','14koHuiN','innerWidth','isAxisX','startScreen','update','directionalLight','log','Vector3','querySelector','removeEventListener','_viewDistance'];a0_0x1c44=function(){return _0x33ba5a;};return a0_0x1c44();}class BlockModel{constructor({width:_0x1d1741,height:height=BASE_BLOCK_SIZE[a0_0x184c74(0x174)],depth:_0x1be331,initPosition:initPosition=new a0_0x590a82[(a0_0x184c74(0x146))](0x0,0x0,0x0),color:color=COLOR[a0_0x184c74(0x114)]}){const _0x38c64d=a0_0x184c74;this[_0x38c64d(0x10c)]=_0x1d1741,this[_0x38c64d(0x174)]=height,this[_0x38c64d(0x163)]=_0x1be331,this[_0x38c64d(0x17c)]=new a0_0x590a82[(_0x38c64d(0x13a))](this[_0x38c64d(0x10c)],this[_0x38c64d(0x174)],this['depth']),this[_0x38c64d(0x10a)]=new a0_0x590a82['MeshLambertMaterial']({'color':color}),this[_0x38c64d(0x16e)]=new a0_0x590a82[(_0x38c64d(0x14c))](this[_0x38c64d(0x17c)],this[_0x38c64d(0x10a)]),this[_0x38c64d(0x16e)]['position'][_0x38c64d(0x116)](...initPosition);}}const getLastBlockProps=_0x9238f5=>{const _0x4a466c=a0_0x184c74;return{'width':_0x9238f5[_0x4a466c(0x114)]['width'],'depth':_0x9238f5[_0x4a466c(0x114)][_0x4a466c(0x163)],'initPosition':_0x9238f5[_0x4a466c(0x114)][_0x4a466c(0x16e)]['position']};},calcFallingPosition=(_0x3e1fb1,_0x2d0101)=>{const _0x46ee39=a0_0x184c74,_0x3f5200=_0x2d0101+_0x3e1fb1[_0x46ee39(0x110)]/0x2;return _0x3e1fb1[_0x46ee39(0x18d)]?_0x3f5200-_0x3e1fb1[_0x46ee39(0x110)]:_0x3f5200;},getFallingBlockProps=_0xe4bc7a=>{const _0x25ae6b=a0_0x184c74,_0x3c7a26={'width':_0xe4bc7a[_0x25ae6b(0x141)]?_0xe4bc7a[_0x25ae6b(0x114)][_0x25ae6b(0x10c)]-_0xe4bc7a[_0x25ae6b(0x110)]:_0xe4bc7a[_0x25ae6b(0x114)]['width'],'depth':_0xe4bc7a['isAxisZ']?_0xe4bc7a['movingBlock']['depth']-_0xe4bc7a[_0x25ae6b(0x110)]:_0xe4bc7a[_0x25ae6b(0x114)][_0x25ae6b(0x163)]},_0x10dc74=_0xe4bc7a[_0x25ae6b(0x141)]?calcFallingPosition(_0xe4bc7a,_0xe4bc7a['movingBlock'][_0x25ae6b(0x16e)][_0x25ae6b(0x13e)]['x']):_0xe4bc7a[_0x25ae6b(0x114)][_0x25ae6b(0x16e)]['position']['x'],_0xd7cada=_0xe4bc7a['isAxisZ']?calcFallingPosition(_0xe4bc7a,_0xe4bc7a[_0x25ae6b(0x114)][_0x25ae6b(0x16e)]['position']['z']):_0xe4bc7a[_0x25ae6b(0x114)]['mesh'][_0x25ae6b(0x13e)]['z'];return _0x3c7a26['initPosition']=new a0_0x590a82['Vector3'](_0x10dc74,_0xe4bc7a['movingBlock']['mesh'][_0x25ae6b(0x13e)]['y'],_0xd7cada),_0x3c7a26;};class FallingBlockModel extends BlockModel{constructor({layer:_0x4501d3,isLastFallingBlock:_0x2ef437}){const _0x28b397=a0_0x184c74,_0x73f865=_0x2ef437?getLastBlockProps(_0x4501d3):getFallingBlockProps(_0x4501d3);_0x73f865[_0x28b397(0x117)]=COLOR[_0x28b397(0x126)],super(_0x73f865);}['tick'](_0x5bd1bc){const _0x5645ad=a0_0x184c74;this[_0x5645ad(0x16e)][_0x5645ad(0x13e)]['y']-=_0x5bd1bc*0x19;}}const calcPlacedBlockShift=(_0x479507,_0x5291d3)=>{const _0x39267=a0_0x184c74,_0x834a9e=(_0x479507-_0x5291d3['overlap'])/0x2,_0x394987=_0x5291d3[_0x39267(0x18d)]?0x1:-0x1;return _0x834a9e*_0x394987;},calcPlacedBlockProps=_0x412e9c=>{const _0x3ef77d=a0_0x184c74,_0x5cd413=_0x412e9c[_0x3ef77d(0x141)]?_0x412e9c['overlap']:_0x412e9c[_0x3ef77d(0x114)]['width'],_0x461e91=_0x412e9c[_0x3ef77d(0x177)]?_0x412e9c[_0x3ef77d(0x110)]:_0x412e9c[_0x3ef77d(0x114)]['depth'],_0x4403e7=_0x412e9c[_0x3ef77d(0x141)]?_0x412e9c[_0x3ef77d(0x114)]['mesh'][_0x3ef77d(0x13e)]['x']+calcPlacedBlockShift(_0x412e9c['movingBlock'][_0x3ef77d(0x10c)],_0x412e9c):_0x412e9c[_0x3ef77d(0x114)][_0x3ef77d(0x16e)]['position']['x'],_0x122c1b=_0x412e9c[_0x3ef77d(0x177)]?_0x412e9c[_0x3ef77d(0x114)][_0x3ef77d(0x16e)]['position']['z']+calcPlacedBlockShift(_0x412e9c[_0x3ef77d(0x114)][_0x3ef77d(0x163)],_0x412e9c):_0x412e9c[_0x3ef77d(0x114)]['mesh']['position']['z'];return{'width':_0x5cd413,'depth':_0x461e91,'initPosition':new a0_0x590a82['Vector3'](_0x4403e7,_0x412e9c[_0x3ef77d(0x114)][_0x3ef77d(0x16e)][_0x3ef77d(0x13e)]['y'],_0x122c1b),'color':COLOR['placedBlock']};};class PlacedBlockModel extends BlockModel{constructor(_0x42c321){const _0x2705ba=calcPlacedBlockProps(_0x42c321);super(_0x2705ba);}}class LayerModel{[a0_0x184c74(0x126)]=null;[a0_0x184c74(0x183)]=null;[a0_0x184c74(0x110)]=0x0;[a0_0x184c74(0x18d)]=![];['_initMovingBlockPosition']=-MOVING_RANGE;constructor({scene:_0x27c9ee,axis:axis='x',width:_0x469902,depth:_0x48ec29,x:x=0x0,y:y=0x0,z:z=0x0}){const _0x1e2148=a0_0x184c74;this['_scene']=_0x27c9ee,this[_0x1e2148(0x108)]=axis,this[_0x1e2148(0x114)]=new BlockModel({'width':_0x469902,'depth':_0x48ec29,'initPosition':new a0_0x590a82['Vector3'](this['isAxisX']?this[_0x1e2148(0x11b)]:x,y,this[_0x1e2148(0x177)]?this[_0x1e2148(0x11b)]:z)}),this[_0x1e2148(0x15b)][_0x1e2148(0x134)](this[_0x1e2148(0x114)][_0x1e2148(0x16e)]);}get[a0_0x184c74(0x141)](){const _0x5ba690=a0_0x184c74;return this[_0x5ba690(0x108)]==='x';}get['isAxisZ'](){const _0x156e2f=a0_0x184c74;return this[_0x156e2f(0x108)]==='z';}[a0_0x184c74(0x10e)](){const _0x1e2e58=a0_0x184c74;this[_0x1e2e58(0x15b)][_0x1e2e58(0x16a)](this['movingBlock']?.[_0x1e2e58(0x16e)]),this[_0x1e2e58(0x114)]=null;}[a0_0x184c74(0x16b)](){const _0xcb8fcb=a0_0x184c74;this['placedBlock']=new PlacedBlockModel(this),this[_0xcb8fcb(0x15b)][_0xcb8fcb(0x134)](this['placedBlock']['mesh']);}[a0_0x184c74(0x13c)]=_0x78b1c8=>{const _0x18c15f=a0_0x184c74;this['fallingBlock']=new FallingBlockModel({'layer':this,'isLastFallingBlock':_0x78b1c8}),this[_0x18c15f(0x15b)][_0x18c15f(0x134)](this[_0x18c15f(0x126)]['mesh']);};[a0_0x184c74(0x125)](_0x7635a){const _0x3f92ab=a0_0x184c74;this[_0x3f92ab(0x110)]=this['isAxisX']?this['movingBlock']['width']-Math[_0x3f92ab(0x181)](this['movingBlock'][_0x3f92ab(0x16e)][_0x3f92ab(0x13e)]['x']-_0x7635a[_0x3f92ab(0x16e)][_0x3f92ab(0x13e)]['x']):this[_0x3f92ab(0x114)][_0x3f92ab(0x163)]-Math['abs'](this[_0x3f92ab(0x114)]['mesh']['position']['z']-_0x7635a[_0x3f92ab(0x16e)][_0x3f92ab(0x13e)]['z']);if(this[_0x3f92ab(0x110)]<=0x0)return this[_0x3f92ab(0x13c)](!![]),this[_0x3f92ab(0x10e)](),![];return this['isCuttingBehind']=this[_0x3f92ab(0x114)]['mesh'][_0x3f92ab(0x13e)][this[_0x3f92ab(0x108)]]-_0x7635a[_0x3f92ab(0x16e)][_0x3f92ab(0x13e)][this[_0x3f92ab(0x108)]]<0x0,this[_0x3f92ab(0x16b)](),this['_createFallingBlock'](),this['_removeMovingBlock'](),!![];}[a0_0x184c74(0x179)](){const _0x27c630=a0_0x184c74;this[_0x27c630(0x10e)](),this[_0x27c630(0x15b)][_0x27c630(0x16a)](this['placedBlock']?.['mesh'],this['fallingBlock']?.[_0x27c630(0x16e)]),this[_0x27c630(0x183)]=null,this['fallingBlock']=null;}}class Tower{[a0_0x184c74(0x122)]=[];['_direction']=0x1;[a0_0x184c74(0x14e)]=0x0;[a0_0x184c74(0x10b)]=new BlockModel({...BASE_BLOCK_SIZE,'color':COLOR['baseBlock']});constructor({stage:_0xd1e5aa,onFinish:_0x46a1b8,onScoreUpdate:_0xfff434}){const _0x43342a=a0_0x184c74;this[_0x43342a(0x16f)]=_0xd1e5aa,this[_0x43342a(0x10f)]=_0x46a1b8,this[_0x43342a(0x139)]=_0xfff434,this[_0x43342a(0x14e)]=0x0,this[_0x43342a(0x13d)](),console[_0x43342a(0x145)](_0x43342a(0x18b));}get['activeLayerIndex'](){const _0x52daf2=a0_0x184c74;return this[_0x52daf2(0x122)]['length']-0x1;}get[a0_0x184c74(0x184)](){const _0x5601b3=a0_0x184c74;return this[_0x5601b3(0x122)][this['activeLayerIndex']];}get[a0_0x184c74(0x182)](){const _0x5a17c1=a0_0x184c74;return this['layers'][this[_0x5a17c1(0x164)]-0x1];}get[a0_0x184c74(0x168)](){const _0x4c4b11=a0_0x184c74;return this['prevLayer']?.[_0x4c4b11(0x183)]??this['baseBlock'];}[a0_0x184c74(0x13d)](){const _0x5ded2c=a0_0x184c74;this[_0x5ded2c(0x16f)]['scene'][_0x5ded2c(0x134)](this[_0x5ded2c(0x10b)][_0x5ded2c(0x16e)]),this['_addFirstLayer']();}[a0_0x184c74(0x138)](){const _0x4ca0d4=a0_0x184c74;this['_direction']=this[_0x4ca0d4(0x186)]*-0x1;}[a0_0x184c74(0x17e)](){const _0x5a61f3=a0_0x184c74,_0x3a66cb=new LayerModel({'scene':this['_stage'][_0x5a61f3(0x111)],'width':BASE_BLOCK_SIZE[_0x5a61f3(0x10c)],'depth':BASE_BLOCK_SIZE[_0x5a61f3(0x163)],'y':BASE_BLOCK_SIZE[_0x5a61f3(0x174)]});this['layers'][_0x5a61f3(0x161)](_0x3a66cb);}[a0_0x184c74(0x119)](){const _0x3c0426=a0_0x184c74,_0x3ed2b9=new LayerModel({'scene':this[_0x3c0426(0x16f)][_0x3c0426(0x111)],'axis':this[_0x3c0426(0x184)][_0x3c0426(0x141)]?'z':'x','width':this['activeLayer'][_0x3c0426(0x183)][_0x3c0426(0x10c)],'depth':this[_0x3c0426(0x184)][_0x3c0426(0x183)][_0x3c0426(0x163)],'x':this['activeLayer'][_0x3c0426(0x183)][_0x3c0426(0x16e)][_0x3c0426(0x13e)]['x'],'y':(this[_0x3c0426(0x164)]+0x2)*BASE_BLOCK_SIZE[_0x3c0426(0x174)],'z':this[_0x3c0426(0x184)][_0x3c0426(0x183)][_0x3c0426(0x16e)][_0x3c0426(0x13e)]['z']});this[_0x3c0426(0x122)][_0x3c0426(0x161)](_0x3ed2b9),this[_0x3c0426(0x16f)][_0x3c0426(0x16d)][_0x3c0426(0x14a)](this[_0x3c0426(0x168)][_0x3c0426(0x16e)][_0x3c0426(0x13e)]);}['tick'](_0xc8e238){const _0x4280ea=a0_0x184c74;this['layers'][_0x4280ea(0x172)](_0x306a9c=>_0x306a9c[_0x4280ea(0x126)]?.[_0x4280ea(0x150)](_0xc8e238));if(!this[_0x4280ea(0x184)]['movingBlock'])return;const _0x19b70a=this[_0x4280ea(0x184)][_0x4280ea(0x114)][_0x4280ea(0x16e)][_0x4280ea(0x13e)][this[_0x4280ea(0x184)][_0x4280ea(0x108)]];_0x19b70a>MOVING_RANGE&&(this['activeLayer']['movingBlock']['mesh'][_0x4280ea(0x13e)][this['activeLayer'][_0x4280ea(0x108)]]=MOVING_RANGE,this[_0x4280ea(0x138)]()),_0x19b70a<-MOVING_RANGE&&(this['activeLayer'][_0x4280ea(0x114)][_0x4280ea(0x16e)][_0x4280ea(0x13e)][this[_0x4280ea(0x184)][_0x4280ea(0x108)]]=-MOVING_RANGE,this['_reverseDirection']()),this[_0x4280ea(0x184)][_0x4280ea(0x114)]['mesh']['position'][this[_0x4280ea(0x184)][_0x4280ea(0x108)]]+=_0xc8e238*SPEED_FACTOR*this[_0x4280ea(0x186)];}[a0_0x184c74(0x175)](){const _0x2a52cf=a0_0x184c74,_0x539186=this[_0x2a52cf(0x184)][_0x2a52cf(0x125)](this[_0x2a52cf(0x168)]);if(_0x539186){this['_addLayer'](),this[_0x2a52cf(0x14e)]++,console[_0x2a52cf(0x145)](_0x2a52cf(0x17f)+this[_0x2a52cf(0x14e)]),this['_scoreUpdate'](this[_0x2a52cf(0x14e)]);return;}this[_0x2a52cf(0x10f)]();}[a0_0x184c74(0x18e)](){const _0x281745=a0_0x184c74;this[_0x281745(0x186)]=0x1,this[_0x281745(0x14e)]=0x0,this[_0x281745(0x122)][_0x281745(0x172)](_0x477793=>_0x477793[_0x281745(0x179)]()),this[_0x281745(0x122)]=[],this['_addFirstLayer'](),this[_0x281745(0x139)]&&this[_0x281745(0x139)](this[_0x281745(0x14e)]);}}class CameraModel{['_viewDistance']=0x14;['_near']=0.1;[a0_0x184c74(0x132)]=0x64;[a0_0x184c74(0x187)]=new a0_0x590a82[(a0_0x184c74(0x146))](0x1e,0x1e,0x1e);constructor(_0x4dc10c){const _0x52d9a9=a0_0x184c74;this[_0x52d9a9(0x16f)]=_0x4dc10c,this[_0x52d9a9(0x130)]=new a0_0x590a82[(_0x52d9a9(0x154))](this[_0x52d9a9(0x149)]*-0x1*this[_0x52d9a9(0x16f)][_0x52d9a9(0x188)],this['_viewDistance']*this[_0x52d9a9(0x16f)][_0x52d9a9(0x188)],this[_0x52d9a9(0x149)],this[_0x52d9a9(0x149)]*-0x1,this[_0x52d9a9(0x12c)],this[_0x52d9a9(0x132)]),this[_0x52d9a9(0x13d)]();}[a0_0x184c74(0x13d)](){const _0xffd4eb=a0_0x184c74;this[_0xffd4eb(0x11d)](),this[_0xffd4eb(0x130)][_0xffd4eb(0x137)](0x0,0x0,0x0),this[_0xffd4eb(0x16f)][_0xffd4eb(0x111)]['add'](this[_0xffd4eb(0x130)]);}[a0_0x184c74(0x143)](){const _0x9e2138=a0_0x184c74;this[_0x9e2138(0x130)][_0x9e2138(0x123)]=this['_viewDistance']*-0x1*this[_0x9e2138(0x16f)]['aspectRatio'],this[_0x9e2138(0x130)][_0x9e2138(0x124)]=this[_0x9e2138(0x149)]*this[_0x9e2138(0x16f)][_0x9e2138(0x188)],this['instance']['updateProjectionMatrix']();}['syncPosition']({x:_0x45c4be,y:_0x47fcc7,z:_0x2c1879}){const _0x3452a3=a0_0x184c74;gsap['to'](this['instance'][_0x3452a3(0x13e)],{'ease':'expo.out','duration':0x1,'x':this[_0x3452a3(0x187)]['x']+_0x45c4be,'y':this[_0x3452a3(0x187)]['y']+_0x47fcc7,'z':this['_initialPosition']['z']+_0x2c1879});}[a0_0x184c74(0x11d)](){const _0x14b461=a0_0x184c74;this['instance'][_0x14b461(0x13e)][_0x14b461(0x116)](...Object[_0x14b461(0x11e)](this[_0x14b461(0x187)]));}}class Stage{[a0_0x184c74(0x153)]={'width':window['innerWidth'],'height':window['innerHeight']};[a0_0x184c74(0x111)]=new a0_0x590a82[(a0_0x184c74(0x17b))]();[a0_0x184c74(0x189)]=new a0_0x590a82[(a0_0x184c74(0x107))]('white',0x2);[a0_0x184c74(0x144)]=new a0_0x590a82[(a0_0x184c74(0x10d))](a0_0x184c74(0x157),0x2);constructor(_0x275f6f){const _0x3dce6a=a0_0x184c74;this['renderer']=new a0_0x590a82['WebGLRenderer']({'canvas':_0x275f6f}),this['camera']=new CameraModel(this),this['_onResizeBound']=this[_0x3dce6a(0x17d)][_0x3dce6a(0x112)](this),this[_0x3dce6a(0x13d)]();}get[a0_0x184c74(0x188)](){const _0x3a5451=a0_0x184c74;return this['sizes'][_0x3a5451(0x10c)]/this[_0x3a5451(0x153)][_0x3a5451(0x174)];}[a0_0x184c74(0x13d)](){const _0x376472=a0_0x184c74;this[_0x376472(0x111)][_0x376472(0x133)]=new a0_0x590a82[(_0x376472(0x165))](COLOR[_0x376472(0x133)]),this['directionalLight'][_0x376472(0x13e)]['set'](0xa,0x12,0x6),this['scene'][_0x376472(0x134)](this[_0x376472(0x144)],this[_0x376472(0x189)]);const _0x4580f5=new a0_0x590a82['AxesHelper'](0x14),_0x2e3943=new a0_0x590a82[(_0x376472(0x178))](this[_0x376472(0x144)]);this[_0x376472(0x18a)](),window[_0x376472(0x11c)](_0x376472(0x13b),this[_0x376472(0x127)]);}[a0_0x184c74(0x17d)](){const _0x5a71af=a0_0x184c74;this[_0x5a71af(0x153)][_0x5a71af(0x10c)]=window[_0x5a71af(0x140)],this['sizes'][_0x5a71af(0x174)]=window[_0x5a71af(0x11f)],this[_0x5a71af(0x16d)][_0x5a71af(0x143)](),this[_0x5a71af(0x18a)]();}['_updateRenderer'](){const _0x58d629=a0_0x184c74;this[_0x58d629(0x155)][_0x58d629(0x166)](this[_0x58d629(0x153)][_0x58d629(0x10c)],this[_0x58d629(0x153)][_0x58d629(0x174)]),this[_0x58d629(0x155)][_0x58d629(0x17a)](Math[_0x58d629(0x113)](window[_0x58d629(0x14f)],0x2));}[a0_0x184c74(0x169)](){const _0x3f3f0c=a0_0x184c74;this['renderer']['render'](this[_0x3f3f0c(0x111)],this['camera'][_0x3f3f0c(0x130)]);}[a0_0x184c74(0x158)](){const _0x24777c=a0_0x184c74;window[_0x24777c(0x148)]('resize',this['_onResizeBound']);}}class Game{['canvas']=document['querySelector']('#canvas');[a0_0x184c74(0x14d)]=document[a0_0x184c74(0x12e)][a0_0x184c74(0x147)]('.board');[a0_0x184c74(0x131)]=document[a0_0x184c74(0x12e)][a0_0x184c74(0x147)]('#button');[a0_0x184c74(0x12b)]=document['body'][a0_0x184c74(0x147)](a0_0x184c74(0x151));[a0_0x184c74(0x142)]=document[a0_0x184c74(0x12e)][a0_0x184c74(0x147)]('.start-screen');['startButton']=document[a0_0x184c74(0x12e)][a0_0x184c74(0x147)](a0_0x184c74(0x167));['clock']=new a0_0x590a82[(a0_0x184c74(0x171))]();[a0_0x184c74(0x152)]=0x0;[a0_0x184c74(0x135)]=![];[a0_0x184c74(0x121)]=![];constructor(){const _0x2af2ef=a0_0x184c74;this['stage']=new Stage(this['canvas']),this[_0x2af2ef(0x185)]=new Tower({'stage':this['stage'],'onFinish':()=>this[_0x2af2ef(0x129)](),'onScoreUpdate':_0x38b6e8=>this[_0x2af2ef(0x120)](_0x38b6e8)}),this[_0x2af2ef(0x13d)]();}['_init'](){const _0x44e8a3=a0_0x184c74;this['tick'](),this['scoreElement']['parentElement']['style']['display']=_0x44e8a3(0x15a),this[_0x44e8a3(0x15f)][_0x44e8a3(0x11c)](_0x44e8a3(0x118),()=>{const _0x498631=_0x44e8a3;if(!this['_isGameActive']||this[_0x498631(0x135)])return;this[_0x498631(0x185)][_0x498631(0x175)]();}),this[_0x44e8a3(0x131)][_0x44e8a3(0x11c)](_0x44e8a3(0x118),()=>this['restart']()),this['startButton'][_0x44e8a3(0x11c)](_0x44e8a3(0x118),()=>this['startGame']()),this[_0x44e8a3(0x120)](0x0);}['startGame'](){const _0x4a5ec1=a0_0x184c74;this[_0x4a5ec1(0x121)]=!![],this[_0x4a5ec1(0x142)][_0x4a5ec1(0x14b)][_0x4a5ec1(0x18c)]=_0x4a5ec1(0x15a),this['scoreElement'][_0x4a5ec1(0x128)][_0x4a5ec1(0x14b)]['display']='block',this[_0x4a5ec1(0x12f)][_0x4a5ec1(0x16d)][_0x4a5ec1(0x11d)](),this[_0x4a5ec1(0x185)][_0x4a5ec1(0x18e)]();}[a0_0x184c74(0x120)](_0x38d7d9){const _0x4198e2=a0_0x184c74;this[_0x4198e2(0x12b)][_0x4198e2(0x12a)]=_0x38d7d9;}[a0_0x184c74(0x150)](){const _0x17f48c=a0_0x184c74,_0x452ddf=this[_0x17f48c(0x162)][_0x17f48c(0x11a)](),_0x2d86d4=_0x452ddf-this[_0x17f48c(0x152)];this[_0x17f48c(0x152)]=_0x452ddf,this['_isGameActive']&&this['tower']['tick'](_0x2d86d4),this[_0x17f48c(0x12f)]['renderFrame'](),requestAnimationFrame(()=>this[_0x17f48c(0x150)]());}[a0_0x184c74(0x129)](){const _0x51e4ab=a0_0x184c74;this[_0x51e4ab(0x135)]=!![],this[_0x51e4ab(0x14d)]['style'][_0x51e4ab(0x18c)]='flex';}[a0_0x184c74(0x15e)](){const _0x4eb94f=a0_0x184c74;console[_0x4eb94f(0x145)]('Restart'),this[_0x4eb94f(0x12f)]['camera'][_0x4eb94f(0x11d)](),this[_0x4eb94f(0x185)][_0x4eb94f(0x18e)](),this[_0x4eb94f(0x120)](0x0),this[_0x4eb94f(0x135)]=![],this['_isGameActive']=!![],this[_0x4eb94f(0x14d)]['style'][_0x4eb94f(0x18c)]=_0x4eb94f(0x15a);}}new Game();